/* alv-ch-ng.forms - 0.2.0 - 2015-03-11 - Copyright (c) 2015 Informatik der Arbeitslosenversicherung; */
!function(){"use strict";var a=angular.module("alv-ch-ng.forms",["alv-ch-ng.core","ui.bootstrap.typeahead","ui.bootstrap.tooltip"]);a.directive("formDatepicker",["$compile","$translate","UiRenderService",function(a,b,c){return{priority:10,restrict:"A",scope:{ngModel:"=",formDatepicker:"="},link:function(d,e,f){var g=c.getDatepickerConfig(),h=d.formDatepicker||!1;if(h&&(angular.isString(h)?angular.extend(g,angular.fromJson(h)):angular.extend(g,h)),d.$watch("formDatepicker",function(){angular.extend(g,d.formDatepicker),e.datepicker("remove"),e.datepicker(g),e.datepicker("update",d.ngModel)},!0),g.language=b.use(),e.addClass("form-control"),f.formDatepickerComponent){var i=angular.element('<span class="pointer input-group-addon" class="pointer" ng-click="showDatepicker()"></span>');f.formDatepickerComponentInset&&i.addClass("input-group-inset"),f.formDatepickerComponentIcon?i.attr("glyph-icon",f.formDatepickerComponentIcon):f.formDatepickerComponentSymbol?i.attr("admin-symbol",f.formDatepickerComponentSymbol):i.attr("glyph-icon","calendar"),e.wrap(angular.element('<div class="input-group"></div>')),a(i)(d),f.formDatepickerComponentLeft||f.formDatepickerComponentInset?e.before(i):e.after(i)}e.datepicker(g),d.$root.$on("$translateChangeSuccess",function(){g.language=b.use(),e.datepicker("remove"),e.datepicker(g),e.datepicker("update",d.ngModel)}),d.showDatepicker=function(){e.datepicker("show")}}}}]),a.directive("formPlaceholderLabel",["$compile",function(a){return{priority:10,restrict:"A",link:function(b,c,d){var e=d.formPlaceholderLabelType;"label"!==e&&"inside"!==e&&"outline"!==e&&(e="label");var f=angular.element('<div class="form-group"></div>');f.addClass("placeholder-"+e);var g=angular.element('<label class="placeholder-'+e+'-text" translate="'+d.formPlaceholderLabel+'"></label>');a(g)(b),g.hide(),void 0!==d.id&&g.attr("for",d.id),c.wrap(f),c.after(g),b.$watch(d.ngModel,function(a){""===a||angular.isUndefined(a)?(c.next().fadeOut("fast"),c.removeClass("active")):(c.addClass("active"),c.next().fadeIn("fast"))})}}}]),a.directive("formTextarea",function(){return{priority:20,restrict:"A",link:function(a,b,c){b.addClass("form-control"),angular.isString(c.formTextareaResize)&&(b.addClass("form-resize-"+c.formTextareaResize),b.parent().hasClass("form-group")&&void 0!==c.formTextareaOverflow&&(b.addClass("form-overflow"),b.parent().css("height",b.parent().outerHeight(!0))))}}}),a.directive("formInput",function(){return{restrict:"A",priority:10,link:function(a,b){b.addClass("form-control")}}}),a.directive("formPassword",["$compile",function(a){return{restrict:"A",priority:20,link:function(b,c){c.addClass("form-control").addClass("inset-align-right");var d=angular.element('<div class="input-group"></div>'),e=angular.element('<span class="input-group-addon input-group-inset"><a ng-click="formShowPassword()"><span class="glyphicon" ng-class="{\'glyphicon-eye-open\' : !formIsShowPassword(), \'glyphicon-eye-close\' : formIsShowPassword()}"></span></a></span>');a(e)(b),c.wrap(d),c.after(e),b.formShowPassword=function(){"password"===c.attr("type")?c.attr("type","text"):c.attr("type","password")},b.formIsShowPassword=function(){return"password"===c.attr("type")?!1:!0}}}}]),a.directive("formMailcheck",["$compile",function(a){return{restrict:"A",priority:20,scope:!0,controller:function(a,b){return this.model=null,this.suggestion=null,this.empty=function(){return this.suggested=!1,this.suggestion=null},this.suggest=function(a){return this.suggested=!0,this.suggestion=a},this.select=function(){return b(this.model).assign(a,this.suggestion.full),this.empty()}},compile:function(){return{pre:function(a,b,c,d){return a.mailcheck=d},post:function(b,c,d,e){e.model=d.ngModel;var f=angular.element('<p class="help-block" ng-cloak ng-show="mailcheck.suggested"><span translate="common_i18n_mailcheck_didYouMean"></span>&nbsp;<a ng-click="mailcheck.select()"><span class="address">{{mailcheck.suggestion.address}}</span>@<span class="domain">{{mailcheck.suggestion.domain}}</span></a>?</p>');if(a(f)(b),d.formMailcheck){var g=angular.element('<p class="help-block" ng-show="!mailcheck.suggested" translate="'+d.formMailcheck+'"></p>');a(g)(b),c.before(g),c.before(f)}else c.after(f);return c.on("keyup blur",function(){return c.mailcheck({domains:["alice.it","ymail.com","aol.com","besonet.ch","bluemail.ch","bluewin.ch","freenet.ch","freenet.de","gmail.com","googlemail.com","gmx.ch","gmx.net","hispeed.ch","hotmail.ch","hotmail.com","sunrise.ch","me.com","msn.ch","outlook.com","seco.admin.ch","yahoo.de","yahoo.com"],topLevelDomains:["ch","com","net","de","it","fr","at","li","es"],suggested:function(a,b){return e.suggest(b)},empty:function(){return b.$apply(function(){return e.empty()})}})})}}}}}]),a.directive("formLabel",["$compile","UiRenderService",function(a,b){return{restrict:"A",priority:10,link:function(c,d,e){var f=d.parent().hasClass("form-inline"),g=d.parent().hasClass("form-horizontal"),h=angular.element('<div class="form-group"></div>'),i=angular.element("<div></div>"),j=b.getFormGridContent();("checkbox"===e.type||"radio"===e.type)&&(i.addClass(e.type),i.addClass(b.getClassPrefix("check")));var k=angular.element('<span translate="'+e.formLabel+'"></span>');a(k)(c);var l;void 0!==e.formHelptext&&(l=b.getHelptext(e.formHelptext),a(l)(c)),(g||"checkbox"!==e.type&&"radio"!==e.type)&&d.wrap(h),("checkbox"===e.type||"radio"===e.type)&&(g&&(j.addClass(b.getFormGridLabelClass(!0)),d.wrap(j)),d.wrap(i));var m=angular.element('<label for="'+e.id+'"></label>');g&&"checkbox"!==e.type&&"radio"!==e.type&&m.addClass(b.getFormGridLabelClass()).addClass("control-label"),f&&"checkbox"!==e.type&&"radio"!==e.type&&m.addClass("sr-only"),"checkbox"!==e.type&&"radio"!==e.type?(m.append(k),d.before(m),g&&d.wrap(j)):(k.addClass(e.type+"-label"),m.append(k),m.append(angular.element('<span class="box"></span>')),d.after(m)),void 0===e.formHelptext||g||f?void 0!==e.formHelptext&&g?d.after(l):void 0!==e.formHelptext&&f&&(l.addClass("sr-only"),d.after(l)):d.before(l),void 0!==e.ngShow&&c.$watch(e.ngShow,function(a){var b=d.parent();(g||e.formPrepend||e.formAppend||e.formPrependDropdown||e.formAppendDropdown)&&(b=b.parent()),a===!0||"true"===a?(b.addClass("ng-show"),b.removeClass("ng-hide")):(b.addClass("ng-hide"),b.removeClass("ng-show"))}),void 0!==e.ngHide&&c.$watch(e.ngHide,function(a){var b=d.parent();(g||e.formPrepend||e.formAppend||e.formPrependDropdown||e.formAppendDropdown)&&(b=b.parent()),a===!0||"true"===a?(b.addClass("ng-hide"),b.removeClass("ng-show")):(b.addClass("ng-show"),b.removeClass("ng-hide"))})}}}]),a.directive("formTag",["$compile","$parse",function(a,b){return{restrict:"A",priority:20,link:function(c,d,e){var f=b(e.formTargetModel)(c),g=angular.element('<div class="form-control"></div>'),h=angular.element("<span></span>"),i=angular.element('<div class="tag" ng-repeat="item in '+e.formTargetModel+'">{{item.text}}<button type="button" data-dismiss="alert" aria-hidden="true" class="close" ng-click="removeFromModel($index)">&times;</button></div>');a(i)(c),h.append(i),d.wrap(g),d.before(h),d.addClass("tag-input"),c.removeFromModel=function(a){f.splice(a,1)},c.addToTargetModel=function(a){var b=!1;angular.forEach(f,function(c){angular.equals(a,c)&&(b=!0)}),b||f.push(a)}}}}]),a.directive("formAppendDropdown",["$compile","$parse",function(a,b){return{restrict:"A",priority:10,link:function(c,d,e){var f=b(e.formTargetModel)(c),g=angular.element('<div class="input-group"></div>'),h=angular.element('<span class="input-group-btn"></span>'),i=angular.element('<div class="btn-group"></div>'),j="";void 0!==e.formAppendDropdownTitle&&(j=e.formAppendDropdownTitle+" ");var k=angular.element('<button class="dropdown-toggle btn" type="button" data-toggle="dropdown">'+j+'<span class="caret"></span></button>'),l=angular.element('<ul class="dropdown-menu dropdown-menu-right"></ul>'),m=angular.element('<li ng-repeat="item in '+e.formAppendDropdown+'"><a ng-click="addToTargetModel(item)" class="pointer">{{item.text}}</a></li>');a(m)(c),l.append(m),i.append(k),i.append(l),h.append(i),d.parent().hasClass("input-group")||d.wrap(g),d.after(h),c.addToTargetModel=function(a){var b=!1;angular.forEach(f,function(c){angular.equals(a,c)&&(b=!0)}),b||f.push(a)}}}}]),a.directive("formPrependDropdown",["$compile","$parse",function(a,b){return{restrict:"A",priority:10,link:function(c,d,e){var f=b(e.formTargetModel)(c),g=angular.element('<div class="input-group"></div>'),h=angular.element('<span class="input-group-btn"></span>'),i=angular.element('<div class="btn-group"></div>'),j="";void 0!==e.formPrependDropdownTitle&&(j=e.formPrependDropdownTitle+" ");var k=angular.element('<button class="dropdown-toggle btn" type="button" data-toggle="dropdown">'+j+'<span class="caret"></span></button>'),l=angular.element('<ul class="dropdown-menu dropdown-menu-right"></ul>'),m=angular.element('<li ng-repeat="item in '+e.formPrependDropdown+'"><a ng-click="addToTargetModel(item)" class="pointer">{{item.text}}</a></li>');a(m)(c),l.append(m),i.append(k),i.append(l),h.append(i),d.parent().hasClass("input-group")||d.wrap(g),d.before(h),c.addToTargetModel=function(a){var b=!1;angular.forEach(f,function(c){angular.equals(a,c)&&(b=!0)}),b||f.push(a)}}}}]),a.directive("formAppend",["$compile",function(a){return{restrict:"A",priority:20,link:function(b,c,d){var e=angular.element('<div class="input-group"></div>'),f=angular.element('<span class="input-group-addon"></span>');if(void 0===d.formAppendIcon&&void 0===d.formAppendBtn){var g=angular.element('<span i18n-msg="'+d.formAppend+'"></span>');a(g)(b),f.append(g)}else"true"===d.formAppendIcon&&void 0===d.formAppendBtn&&(f.attr("glyph-icon",d.formAppend),a(f)(b));if(void 0!==d.formAppendBtn){var h="button";void 0!==d.formAppendBtnSubmit&&"true"===d.formAppendBtnSubmit&&(h="submit");var i=angular.element('<button type="'+h+'" ng-click="'+d.formAppendBtn+'"></button>');"true"===d.formAppendIcon?i.attr("glyph-icon",d.formAppend):i.attr("i18n-msg",d.formAppend),c.hasClass("input-sm")&&i.addClass("btn-sm"),c.hasClass("input-lg")&&i.addClass("btn-lg"),a(i)(b),f=angular.element('<span class="input-group-btn"></span>'),f.append(i)}c.parent().hasClass("input-group")||c.wrap(e),c.after(f)}}}]),a.directive("formPrepend",["$compile",function(a){return{restrict:"A",priority:20,link:function(b,c,d){var e=angular.element('<div class="input-group"></div>'),f=angular.element('<span class="input-group-addon"></span>');if(void 0===d.formPrependIcon&&void 0===d.formPrependBtn){var g=angular.element('<span i18n-msg="'+d.formPrepend+'"></span>');a(g)(b),f.append(g)}else"true"===d.formPrependIcon&&void 0===d.formPrependBtn&&(f.attr("glyph-icon",d.formPrepend),a(f)(b));if(void 0!==d.formPrependBtn){var h="button";void 0!==d.formPrependBtnSubmit&&"true"===d.formPrependBtnSubmit&&(h="submit");var i=angular.element('<button type="'+h+'" ng-click="'+d.formPrependBtn+'"></button>');"true"===d.formPrependIcon?i.attr("glyph-icon",d.formPrepend):i.attr("i18n-msg",d.formPrepend),c.hasClass("input-sm")&&i.addClass("btn-sm"),c.hasClass("input-lg")&&i.addClass("btn-lg"),a(i)(b),f=angular.element('<span class="input-group-btn"></span>'),f.append(i)}c.parent().hasClass("input-group")||c.wrap(e),c.before(f)}}}]),a.directive("formInset",["$compile",function(a){return{restrict:"A",priority:20,link:function(b,c,d){var e=angular.element('<div class="input-group"></div>'),f=angular.element('<span class="input-group-addon input-group-inset"></span>');if(void 0===d.formInsetAction&&void 0===d.formInsetBtn)f.attr("glyph-icon",d.formInset),a(f)(b);else{var g=angular.element('<a ng-click="'+d.formInsetAction+'"></a>');if(void 0!==d.formInsetBtn){var h="button";"submit"===d.formInsetBtn&&(h="submit"),g=angular.element('<button type="'+h+'" ng-click="'+d.formInsetAction+'"></button>'),c.hasClass("input-sm")&&g.addClass("btn-sm"),c.hasClass("input-lg")&&g.addClass("btn-lg")}g.attr("glyph-icon",d.formInset),a(g)(b),f.append(g)}c.parent().hasClass("input-group")||c.wrap(e),"right"===d.formInsetAlign?(c.addClass("inset-align-right"),c.after(f)):c.before(f)}}}])}(),angular.module("alv-ch-ng.forms").run(["$templateCache",function(a){"use strict";a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n'),a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n'),a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>'),a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]);